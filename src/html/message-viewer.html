<!-- Message Viewer Popup Template -->
<div id="message_viewer_overlay" class="message-viewer-overlay">
    <div class="message-viewer-popup">
        <div class="message-viewer-header">
            <h3>
                <i class="fa-solid fa-comments"></i>
                <span id="message_viewer_title">Chat Messages</span>
            </h3>
            <div class="message-viewer-controls">
                <button id="message_viewer_close" class="message-viewer-btn" title="Close (Esc)">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
        </div>
        <div id="message_viewer_content" class="message-viewer-content">
            <!-- Dynamic content: loading, error, empty, or message list -->
            
            <!-- Loading State Template -->
            <template id="message_viewer_loading_template">
                <div class="message-viewer-loading">
                    <i class="fa-solid fa-spinner fa-spin"></i>
                    <div>Loading messages...</div>
                </div>
            </template>
            
            <!-- Error State Template -->
            <template id="message_viewer_error_template">
                <div class="message-viewer-error">
                    <i class="fa-solid fa-exclamation-triangle"></i>
                    <div>Failed to load messages</div>
                    <div class="error-details"></div>
                    <button id="message_viewer_retry" class="message-viewer-btn retry-btn">
                        <i class="fa-solid fa-refresh"></i>
                        Retry
                    </button>
                </div>
            </template>
            
            <!-- Empty State Template -->
            <template id="message_viewer_empty_template">
                <div class="message-viewer-empty">
                    <i class="fa-solid fa-inbox"></i>
                    <div>No messages in this chat</div>
                </div>
            </template>
            
            <!-- Message List Container -->
            <div id="message_viewer_list" class="message-viewer-list" style="display: none;">
                <!-- Messages will be dynamically inserted here -->
            </div>
        </div>
    </div>
</div>
